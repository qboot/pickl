{% extends "PicklAppBundle::layout.html.twig" %}

{% block title %}{{ parent() }} – Change password{% endblock %}

{% block body %}

    {% trans_default_domain 'FOSUserBundle' %}

    <div id="navtwo">
        <div id="navprofil">
            <div id="imgprofil"><img src="{{ asset(app.user.profilePicture.getWebPath) }}"/></div>
            <p>Hi, {{ app.user.username }}!<br><a href="{{ path('pickl_app_user_edit') }}">EDIT MY PROFILE</a></p>
        </div>
        <ul>
            <li class="activ" ><a href="{{ path('pickl_app_my_account') }}">RETURN TO MY ACCOUNT</a></li>
            <li><a href="#writenews">CHANGE PASSWORD</a></li>
        </ul>
    </div>

    <div id="content">
        <div id="contentprofil">
            <div id="compteimgtop">
                <h1>Welcome !</h1>
                <p>
                    Here, you can find most of the information concerning your activities on Pickl. From a short
                    summary of your level and the amount of experience you got until now to the latest projects
                    you added to your Likes passing by all your different projects and contributions to the other’s
                    projects.
                </p>
                <p>
                    From here, you can edit your profile as well, by putting more precise information about you
                    and changing your profile and cover photo to make it more personal.
                </p>
            </div>

            <div id="activity" class="titleprofil">
                    <h2 id="writenews">CHANGE PASSWORD</h2>
                <div class="sep"></div>
            </div>

            {% form_theme form 'PicklAppBundle:Form:fields.html.twig' %}

            {{ form_start(form, { 'action': path('fos_user_change_password'), 'attr': { 'class': 'fos_user_change_password', 'id': 'formaddproject' } }) }}

            {# Les erreurs générales du formulaire. #}
            {{ form_errors(form) }}
        <ul>
            <div class="sizeform">
                <li>
                    <div style="position:relative;">
                        {# Génération du label. #}
                        <p>{{ form_label(form.current_password, "Current password") }}</p>

                        {# Affichage des erreurs pour ce champ précis. #}
                        {% if not form.vars.valid %}
                        {{ form_errors(form.current_password) }}
                        {% endif %}

                        <div class="formdouble">
                            {{ form_widget(form.current_password, {'attr': {'class': 'longinput'}}) }}
                        </div>
                    </div>
                </li>
                <li>
                    <div style="position:relative;">
                        {# Génération du label. #}
                        <p>{{ form_label(form.plainPassword.first, "New password") }}</p>

                        {# Affichage des erreurs pour ce champ précis. #}
                        {% if not form.vars.valid %}
                            {{ form_errors(form.plainPassword.first) }}
                        {% endif %}

                        <div class="formdouble">
                            {{ form_widget(form.plainPassword.first, {'attr': {'class': 'longinput'}}) }}
                        </div>
                    </div>
                </li>
                <li>
                    <div style="position:relative;">
                        {# Génération du label. #}
                        <p>{{ form_label(form.plainPassword.second, "Repeat new password") }}</p>

                        {# Affichage des erreurs pour ce champ précis. #}
                        {% if not form.vars.valid %}
                            {{ form_errors(form.plainPassword.second) }}
                        {% endif %}

                        <div class="formdouble">
                            {{ form_widget(form.plainPassword.second, {'attr': {'class': 'longinput'}}) }}
                        </div>
                    </div>
                </li>
                <li style="height:150px"></li>
            </div>
        </ul>
    <!-- fin du form -->
    {{ form_rest(form) }}
    {{ form_end(form) }}
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="{{ asset('js/formCounterparts.js') }}"></script>
{% endblock %}

{% block sponsors %}
    <div id="sponsorscontent">
    </div>

    <div id="create">
        <a href="#">CHANGE PASSWORD !</a>
    </div>
    <script>
        $(document).ready(function() {
            $('#create a').click(function(e){
                e.preventDefault();
                $('#formaddproject').submit();
            });
        });
    </script>
{% endblock %}